(function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.pseudocode=e()}})(function(){var e,t,n;return function(){function e(t,n,s){function o(i,r){if(!n[i]){if(!t[i]){var c,l,d="function"==typeof require&&require;if(!r&&d)return d(i,!0);if(a)return a(i,!0);throw l=new Error("Cannot find module '"+i+"'"),l.code="MODULE_NOT_FOUND",l}c=n[i]={exports:{}},t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,s)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<s.length;i++)o(s[i]);return o}return e}()({1:[function(e,t){var i=e("./src/ParseError"),a=e("./src/Lexer"),r=e("./src/Parser"),c=e("./src/Renderer");function s(e,t){var n=new a(e),s=new r(n);return new c(s,t)}function o(e){try{MathJax.typeset([e])}catch{MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}}t.exports={ParseError:i,render:function(e,t,n){if(e==null)throw"input cannot be empty";var a=s(e,n),i=a.toDOM();return t&&t.appendChild(i),a.backend.name==="mathjax"&&o(i),i},renderToString:function(e,t){if(e==null)throw"input cannot be empty";var n=s(e,t);return n.backend.name==="mathjax"&&console.warn("Using MathJax backend -- math may not be rendered."),n.toMarkup()},renderElement:function(e,t){if(!(e instanceof Element))throw"a DOM element is required";e.style.display="none";var n=s(e.textContent,t),i=n.toDOM();e.replaceWith(i),n.backend&&n.backend.name==="mathjax"&&o(i)},renderClass:function(e,t){for(classes=document.getElementsByClassName(e);classes.length!==0;)this.renderElement(classes[0],t)}}},{"./src/Lexer":2,"./src/ParseError":3,"./src/Parser":4,"./src/Renderer":5}],2:[function(e,t){var i,a,r,c,l=e("./utils"),o=e("./ParseError"),s=function(e){this._input=e,this._remain=e,this._pos=0,this._nextAtom=this._currentAtom=null,this._next()};s.prototype.accept=function(e,t){return this._nextAtom.type===e&&this._matchText(t)?(this._next(),this._currentAtom.text):null},s.prototype.expect=function(e,t){var n=this._nextAtom;if(n.type!==e)throw new o("Expect an atom of "+e+" but received "+n.type,this._pos,this._input);if(!this._matchText(t))throw new o("Expect `"+t+"` but received `"+n.text+"`",this._pos,this._input);return this._next(),this._currentAtom.text},s.prototype.get=function(){return this._currentAtom},a={exec:function(e){for(var t,n,s,a,r,l,d,c=[{start:"$",end:"$"},{start:"\\(",end:"\\)"}],u=e.length,i=0;i<c.length;i++){if(a=c[i].start,e.indexOf(a)!==0)continue;for(r=c[i].end,n=a.length,s=e.slice(n);n<u;){if(t=s.indexOf(r),t<0)throw new o("Math environment is not closed",this._pos,this._input);if(t>0&&s[t-1]==="\\"){l=t+r.length,s=s.slice(l),n+=l;continue}return d=[e.slice(0,n+t+r.length),e.slice(a.length,n+t)],d}}return null}},i={special:/^(\\\\|\\{|\\}|\\\$|\\&|\\#|\\%|\\_)/,math:a,func:/^\\([a-zA-Z]+)/,open:/^\{/,close:/^\}/,quote:/^(`|``|'|'')/,ordinary:/^[^\\{}$&#%_\s]+/},r=/^%.*/,c=/^\s+/,s.prototype._skip=function(e){this._pos+=e,this._remain=this._remain.slice(e)},s.prototype._next=function(){for(var e,t,n,s,l,d,u,h,m,a=!1;1;){if(t=c.exec(this._remain),t&&(a=!0,l=t[0].length,this._skip(l)),n=r.exec(this._remain),!n)break;d=n[0].length,this._skip(d)}if(this._currentAtom=this._nextAtom,this._remain==="")return this._nextAtom={type:"EOF",text:null,whitespace:!1},!1;for(u in i){if(h=i[u],e=h.exec(this._remain),!e)continue;return s=e[0],m=e[1]?e[1]:s,this._nextAtom={type:u,text:m,whitespace:a},this._pos+=s.length,this._remain=this._remain.slice(e[0].length),!0}throw new o("Unrecoganizable atom",this._pos,this._input)},s.prototype._matchText=function(e){return e==null||(l.isString(e)?e.toLowerCase()===this._nextAtom.text.toLowerCase():(e=e.map(function(e){return e.toLowerCase()}),e.indexOf(this._nextAtom.text.toLowerCase())>=0))},t.exports=s},{"./ParseError":3,"./utils":6}],3:[function(e,t){function s(e,t,n){var o,i,s="Error: "+e;t!==void 0&&n!==void 0&&(s+=" at position "+t+": `",n=n.slice(0,t)+"↱"+n.slice(t),o=Math.max(0,t-15),i=t+15,s+=n.slice(o,i)+"`"),this.message=s}s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,t.exports=s},{}],4:[function(e,t){var s,i,a,c,l,d,u=e("./utils"),r=e("./ParseError"),o=function(e,t){this.type=e,this.value=t,this.children=[]};o.prototype.toString=function(e){e||(e=0);for(var t,n,i,s="",o=0;o<e;o++)s+="  ";if(t=s+"<"+this.type+">",this.value&&(t+=" ("+u.toString(this.value)+")"),t+=`
`,this.children)for(n=0;n<this.children.length;n++)i=this.children[n],t+=i.toString(e+1);return t},o.prototype.addChild=function(e){if(!e)throw"argument cannot be null";this.children.push(e)},i=function(e,t,n){this.type=e,this.value=t,this.children=null,this.whitespace=!!n},i.prototype=o.prototype,s=function(e){this._lexer=e},s.prototype.parse=function(){for(var e,t,n=new o("root");!0;){if(e=this._acceptEnvironment(),e===null)break;if(e==="algorithm")t=this._parseAlgorithmInner();else if(e==="algorithmic")t=this._parseAlgorithmicInner();else throw new r("Unexpected environment "+e);this._closeEnvironment(e),n.addChild(t)}return this._lexer.expect("EOF"),n},s.prototype._acceptEnvironment=function(){var t,e=this._lexer;return e.accept("func","begin")?(e.expect("open"),t=e.expect("ordinary"),e.expect("close"),t):null},s.prototype._closeEnvironment=function(e){var t=this._lexer;t.expect("func","end"),t.expect("open"),t.expect("ordinary",e),t.expect("close")},s.prototype._parseAlgorithmInner=function(){for(var e,n,s,t=new o("algorithm");!0;){if(e=this._acceptEnvironment(),e!==null){if(e!=="algorithmic")throw new r("Unexpected environment "+e);s=this._parseAlgorithmicInner(),this._closeEnvironment(),t.addChild(s);continue}if(n=this._parseCaption(),n){t.addChild(n);continue}break}return t},s.prototype._parseAlgorithmicInner=function(){for(var e,t=new o("algorithmic");!0;){if(e=this._parseStatement(c),e){t.addChild(e);continue}if(e=this._parseBlock(),e.children.length>0){t.addChild(e);continue}break}return t},s.prototype._parseCaption=function(){var t,e=this._lexer;return e.accept("func","caption")?(t=new o("caption"),e.expect("open"),t.addChild(this._parseCloseText()),e.expect("close"),t):null},s.prototype._parseBlock=function(){for(var t,n,s,i,a,e=new o("block");!0;){if(t=this._parseControl(),t){e.addChild(t);continue}if(n=this._parseFunction(),n){e.addChild(n);continue}if(s=this._parseStatement(l),s){e.addChild(s);continue}if(i=this._parseCommand(d),i){e.addChild(i);continue}if(a=this._parseComment(),a){e.addChild(a);continue}break}return e},s.prototype._parseControl=function(){var e;if(e=this._parseIf())return e;if(e=this._parseLoop())return e;if(e=this._parseRepeat())return e;if(e=this._parseUpon())return e;if(e=this._parseMatch())return e},s.prototype._parseFunction=function(){var t,n,s,i,a,e=this._lexer;return e.accept("func",["function","procedure"])?(n=this._lexer.get().text,e.expect("open"),s=e.expect("ordinary"),e.expect("close"),e.expect("open"),i=this._parseCloseText(),e.expect("close"),a=this._parseBlock(),e.expect("func","end"+n),t=new o("function",{type:n,name:s}),t.addChild(i),t.addChild(a),t):null},s.prototype._parseIf=function(){if(!this._lexer.accept("func","if"))return null;var t,n,e=new o("if");for(this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),t=0;this._lexer.accept("func",["elif","elsif","elseif"]);)this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),t++;return n=!1,this._lexer.accept("func","else")&&(n=!0,e.addChild(this._parseBlock())),this._lexer.expect("func","endif"),e.value={numElif:t,hasElse:n},e},s.prototype._parseMatch=function(){if(!this._lexer.accept("func","match"))return null;var t,n,e=new o("match");for(this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),t=0;this._lexer.accept("func","case");)this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),this._lexer.expect("func","endcase"),t++;return n=!1,this._lexer.accept("func","otherwise")&&(n=!0,e.addChild(this._parseBlock())),this._lexer.expect("func","endmatch"),e.value={numCases:t,hasOtherwise:n},e},s.prototype._parseLoop=function(){if(!this._lexer.accept("func",["FOR","FORALL","WHILE"]))return null;var n,e=this._lexer.get().text.toLowerCase(),t=new o("loop",e);return this._lexer.expect("open"),t.addChild(this._parseCond()),this._lexer.expect("close"),t.addChild(this._parseBlock()),n=e!=="forall"?"end"+e:"endfor",this._lexer.expect("func",n),t},s.prototype._parseRepeat=function(){if(!this._lexer.accept("func",["REPEAT"]))return null;var t=this._lexer.get().text.toLowerCase(),e=new o("repeat",t);return e.addChild(this._parseBlock()),this._lexer.expect("func","until"),this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e},s.prototype._parseUpon=function(){if(!this._lexer.accept("func","upon"))return null;var e=new o("upon");return this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),this._lexer.expect("func","endupon"),e},c=["ensure","require","input","output"],l=["state","print","return"],s.prototype._parseStatement=function(e){if(!this._lexer.accept("func",e))return null;var n=this._lexer.get().text.toLowerCase(),t=new o("statement",n);return t.addChild(this._parseOpenText()),t},d=["break","continue"],s.prototype._parseCommand=function(e){if(!this._lexer.accept("func",e))return null;var t=this._lexer.get().text.toLowerCase(),n=new o("command",t);return n},s.prototype._parseComment=function(){if(!this._lexer.accept("func","comment"))return null;var e=new o("comment");return this._lexer.expect("open"),e.addChild(this._parseCloseText()),this._lexer.expect("close"),e},s.prototype._parseCall=function(){var t,n,s,i,e=this._lexer;return e.accept("func","call")?(n=e.get().whitespace,e.expect("open"),s=e.expect("ordinary"),e.expect("close"),t=new o("call"),t.whitespace=n,t.value=s,e.expect("open"),i=this._parseCloseText(),t.addChild(i),e.expect("close"),t):null},s.prototype._parseCond=s.prototype._parseCloseText=function(){return this._parseText("close")},s.prototype._parseOpenText=function(){return this._parseText("open")},s.prototype._parseText=function(e){for(var t,s=new o(e+"-text"),n=!1;!0;){if(t=this._parseAtom()||this._parseCall(),t){n&&(t.whitespace|=n),s.addChild(t);continue}if(this._lexer.accept("open")){t=this._parseCloseText(),n=this._lexer.get().whitespace,t.whitespace=n,s.addChild(t),this._lexer.expect("close"),n=this._lexer.get().whitespace;continue}break}return s},a={ordinary:{tokenType:"ordinary"},math:{tokenType:"math"},special:{tokenType:"special"},"cond-symbol":{tokenType:"func",tokenValues:["and","or","not","true","false","to","downto"]},"quote-symbol":{tokenType:"quote"},"sizing-dclr":{tokenType:"func",tokenValues:["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"]},"font-dclr":{tokenType:"func",tokenValues:["normalfont","rmfamily","sffamily","ttfamily","upshape","itshape","slshape","scshape","bfseries","mdseries","lfseries"]},"font-cmd":{tokenType:"func",tokenValues:["textnormal","textrm","textsf","texttt","textup","textit","textsl","textsc","uppercase","lowercase","textbf","textmd","textlf"]},"text-symbol":{tokenType:"func",tokenValues:["textbackslash"]}},s.prototype._parseAtom=function(){for(t in a){var t,s,n=a[t],e=this._lexer.accept(n.tokenType,n.tokenValues);if(e===null)continue;return s=this._lexer.get().whitespace,t!=="ordinary"&&t!=="math"&&(e=e.toLowerCase()),new i(t,e,s)}return null},t.exports=s},{"./ParseError":3,"./utils":6}],5:[function(e,t){var r,l=e("./utils");function i(e){this._css={},this._fontSize=this._outerFontSize=e!==void 0?e:1}i.prototype.outerFontSize=function(e){return e!==void 0&&(this._outerFontSize=e),this._outerFontSize},i.prototype.fontSize=function(){return this._fontSize},i.prototype._fontCommandTable={normalfont:{"font-family":"KaTeX_Main"},rmfamily:{"font-family":"KaTeX_Main"},sffamily:{"font-family":"KaTeX_SansSerif"},ttfamily:{"font-family":"KaTeX_Typewriter"},bfseries:{"font-weight":"bold"},mdseries:{"font-weight":"medium"},lfseries:{"font-weight":"lighter"},upshape:{"font-style":"normal","font-variant":"normal"},itshape:{"font-style":"italic","font-variant":"normal"},scshape:{"font-style":"normal","font-variant":"small-caps"},slshape:{"font-style":"oblique","font-variant":"normal"},textnormal:{"font-family":"KaTeX_Main"},textrm:{"font-family":"KaTeX_Main"},textsf:{"font-family":"KaTeX_SansSerif"},texttt:{"font-family":"KaTeX_Typewriter"},textbf:{"font-weight":"bold"},textmd:{"font-weight":"medium"},textlf:{"font-weight":"lighter"},textup:{"font-style":"normal","font-variant":"normal"},textit:{"font-style":"italic","font-variant":"normal"},textsc:{"font-style":"normal","font-variant":"small-caps"},textsl:{"font-style":"oblique","font-variant":"normal"},uppercase:{"text-transform":"uppercase"},lowercase:{"text-transform":"lowercase"}},i.prototype._sizingScalesTable={tiny:.68,scriptsize:.8,footnotesize:.85,small:.92,normalsize:1,large:1.17,Large:1.41,LARGE:1.58,huge:1.9,Huge:2.28},i.prototype.updateByCommand=function(e){var n,s,t=this._fontCommandTable[e];if(t!==void 0){for(s in t)this._css[s]=t[s];return}if(n=this._sizingScalesTable[e],n!==void 0){this._outerFontSize=this._fontSize,this._fontSize=n;return}throw new ParserError("unrecogniazed text-style command")},i.prototype.toCSS=function(){var t,n,e="";for(n in this._css){if(t=this._css[n],t===void 0)continue;e+=n+":"+t+";"}return this._fontSize!==this._outerFontSize&&(e+="font-size:"+this._fontSize/this._outerFontSize+"em;"),e};function a(e,t){this._nodes=e,this._textStyle=t}a.prototype._renderCloseText=function(e,t){var n=new i(this._textStyle.fontSize()),s=new a(e.children,n);e.whitespace&&this._html.putText(" "),this._html.putHTML(s.renderToHTML(t))},a.prototype.renderToHTML=function(e){for(this._html=new o;(n=this._nodes.shift())!==void 0;){var n,s,r,c,l,d,u,h,m,f,p,g,v=n.type,t=n.value;switch(n.whitespace&&this._html.putText(" "),v){case"ordinary":this._html.putText(t);break;case"math":if(typeof e=="undefined")throw"No math backend found. Please setup KaTeX or MathJax.";if(e.name==="katex")this._html.putHTML(e.driver.renderToString(t));else if(e.name==="mathjax")this._html.putText("$"+t+"$");else throw"Unknown math backend "+e;break;case"cond-symbol":this._html.beginSpan("ps-keyword").putText(t.toLowerCase()).endSpan();break;case"special":if(t==="\\\\"){this._html.putHTML("<br/>");break}p={"\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_"},d=p[t],this._html.putText(d);break;case"text-symbol":l={textbackslash:"\\"},c=l[t],this._html.putText(c);break;case"quote-symbol":u={"`":"‘","``":"“","'":"’","''":"”"},h=u[t],this._html.putText(h);break;case"call":this._html.beginSpan("ps-funcname").putText(t).endSpan(),this._html.write("("),m=n.children[0],this._renderCloseText(m,e),this._html.write(")");break;case"close-text":this._renderCloseText(n,e);break;case"font-dclr":case"sizing-dclr":this._textStyle.updateByCommand(t),this._html.beginSpan(null,this._textStyle.toCSS()),f=new a(this._nodes,this._textStyle),this._html.putHTML(f.renderToHTML(e)),this._html.endSpan();break;case"font-cmd":if(r=this._nodes[0],r.type!=="close-text")continue;s=new i(this._textStyle.fontSize()),s.updateByCommand(t),this._html.beginSpan(null,s.toCSS()),g=new a(r.children,s),this._html.putHTML(g.renderToHTML(e)),this._html.endSpan();break;default:throw new ParseError("Unexpected ParseNode of type "+n.type)}}return this._html.toMarkup()};function o(){this._body=[],this._textBuf=[]}o.prototype.beginDiv=function(e,t,n){return this._beginTag("div",e,t,n),this._body.push(`
`),this},o.prototype.endDiv=function(){return this._endTag("div"),this._body.push(`
`),this},o.prototype.beginP=function(e,t,n){return this._beginTag("p",e,t,n),this._body.push(`
`),this},o.prototype.endP=function(){return this._flushText(),this._endTag("p"),this._body.push(`
`),this},o.prototype.beginSpan=function(e,t,n){return this._flushText(),this._beginTag("span",e,t,n)},o.prototype.endSpan=function(){return this._flushText(),this._endTag("span")},o.prototype.putHTML=function(e){return this._flushText(),this._body.push(e),this},o.prototype.putText=function(e){return this._textBuf.push(e),this},o.prototype.write=function(e){this._body.push(e)},o.prototype.toMarkup=function(){this._flushText();var e=this._body.join("");return e.trim()},o.prototype.toDOM=function(){var t=this.toMarkup(),e=document.createElement("div");return e.innerHTML=t,e.firstChild},o.prototype._flushText=function(){if(this._textBuf.length===0)return;var e=this._textBuf.join("");this._body.push(this._escapeHtml(e)),this._textBuf=[]},o.prototype._beginTag=function(e,t,n,s){var o,a,i="<"+e;if(t&&(i+=' class="'+t+'"'),n){if(l.isString(n))o=n;else{o="";for(a in n)attrVal=n[a],o+=a+":"+attrVal+";"}s&&(o+=s),i+=' style="'+o+'"'}return i+=">",this._body.push(i),this},o.prototype._endTag=function(e){return this._body.push("</"+e+">"),this},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},o.prototype._escapeHtml=function(e){return String(e).replace(/[&<>"'/]/g,function(e){return r[e]})};function c(e){e=e||{},this.indentSize=e.indentSize?this._parseEmVal(e.indentSize):1.2,this.commentDelimiter=e.commentDelimiter!==void 0?e.commentDelimiter:" // ",this.lineNumberPunc=e.lineNumberPunc!==void 0?e.lineNumberPunc:":",this.lineNumber=e.lineNumber!==void 0&&e.lineNumber,this.noEnd=e.noEnd!==void 0&&e.noEnd,this.scopeLines=e.scopeLines!==void 0&&e.scopeLines,e.captionCount!==void 0&&(s.captionCount=e.captionCount),this.titlePrefix=e.titlePrefix!==void 0?e.titlePrefix:"Algorithm"}c.prototype._parseEmVal=function(e){if(e=e.trim(),e.indexOf("em")!==e.length-2)throw"option unit error; no `em` found";return Number(e.substring(0,e.length-2))};function s(t,n){this._root=t.parse(),this._options=new c(n),this._openLine=!1,this._blockLevel=0,this._textLevel=-1,this._globalTextStyle=new i,this.backend=void 0;try{typeof katex=="undefined"&&(katex=e("katex"))}catch{}try{typeof MathJax=="undefined"&&(MathJax=e("mathjax"))}catch{}typeof katex!="undefined"?this.backend={name:"katex",driver:katex}:typeof MathJax!="undefined"&&(this.backend={name:"mathjax",driver:MathJax})}s.captionCount=0,s.prototype.toMarkup=function(){var e=this._html=new o;return this._buildTree(this._root),delete this._html,e.toMarkup()},s.prototype.toDOM=function(){var t=this.toMarkup(),e=document.createElement("div");return e.innerHTML=t,e.firstChild},s.prototype._beginGroup=function(e,t,n){this._closeLineIfAny(),this._html.beginDiv("ps-"+e+(t?" "+t:""),n)},s.prototype._endGroup=function(){this._closeLineIfAny(),this._html.endDiv()},s.prototype._beginBlock=function(){var t=this._options.lineNumber&&this._blockLevel===0?.6:0,e=this._options.indentSize+t;this._options.scopeLines&&(e=e/2),this._beginGroup("block",null,{"margin-left":e+"em"}),this._blockLevel++},s.prototype._endBlock=function(){this._closeLineIfAny(),this._endGroup(),this._blockLevel--},s.prototype._newLine=function(){this._closeLineIfAny(),this._openLine=!0,this._globalTextStyle.outerFontSize(1);var t,e=this._options.indentSize;this._blockLevel>0?(this._numLOC++,this._html.beginP("ps-line ps-code",this._globalTextStyle.toCSS()),t=0,this._options.lineNumber&&(t+=e*1.25),this._options.scopeLines&&(t+=e*.1),this._options.lineNumber&&this._html.beginSpan("ps-linenum",{left:-((this._blockLevel-1)*t)+"em"}).putText(this._numLOC+this._options.lineNumberPunc).endSpan()):this._html.beginP("ps-line",{"text-indent":-e+"em","padding-left":e+"em"},this._globalTextStyle.toCSS())},s.prototype._closeLineIfAny=function(){if(!this._openLine)return;this._html.endP(),this._openLine=!1},s.prototype._typeKeyword=function(e){this._html.beginSpan("ps-keyword").putText(e).endSpan()},s.prototype._typeFuncName=function(e){this._html.beginSpan("ps-funcname").putText(e).endSpan()},s.prototype._typeText=function(e){this._html.write(e)},s.prototype._buildTreeForAllChildren=function(e){for(var n=e.children,t=0;t<n.length;t++)this._buildTree(n[t])},s.prototype._buildCommentsFromBlock=function(e){for(var n,t=e.children;t.length>0&&t[0].type==="comment";)n=t.shift(),this._buildTree(n)},s.prototype._buildTree=function(e){switch(e.type){case"root":this._beginGroup("root"),this._buildTreeForAllChildren(e),this._endGroup();break;case"algorithm":for(t=0;t<e.children.length;t++){if(o=e.children[t],o.type!=="caption")continue;O=o,s.captionCount++}O?(this._beginGroup("algorithm","with-caption"),this._buildTree(O)):this._beginGroup("algorithm");for(t=0;t<e.children.length;t++){if(o=e.children[t],o.type==="caption")continue;this._buildTree(o)}this._endGroup();break;case"algorithmic":var t,n,o,r,c,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,D,N,L,R,P,H,I,B,l="";this._options.lineNumber?l+=" with-linenum":"",this._options.scopeLines?l+=" with-scopelines":"",l?(this._beginGroup("algorithmic",l),this._numLOC=0):this._beginGroup("algorithmic"),this._buildTreeForAllChildren(e),this._endGroup();break;case"block":this._beginBlock(),this._buildTreeForAllChildren(e),this._endBlock();break;case"function":d=e.value.type.toLowerCase(),R=e.value.name,n=e.children[0],v=e.children[1],this._newLine(),this._typeKeyword(d+" "),this._typeFuncName(R),this._typeText("("),this._buildTree(n),this._typeText(")"),this._buildCommentsFromBlock(v),this._buildTree(v),this._options.noEnd||(this._newLine(),this._typeKeyword("end "+d));break;case"if":this._newLine(),this._typeKeyword("if "),ifCond=e.children[0],this._buildTree(ifCond),this._typeKeyword(" then"),h=e.children[1],this._buildCommentsFromBlock(h),this._buildTree(h);for(x=e.value.numElif,c=0;c<x;c++)this._newLine(),this._typeKeyword("else if "),N=e.children[2+2*c],this._buildTree(N),this._typeKeyword(" then"),g=e.children[2+2*c+1],this._buildCommentsFromBlock(g),this._buildTree(g);z=e.value.hasElse,z&&(this._newLine(),this._typeKeyword("else"),b=e.children[e.children.length-1],this._buildCommentsFromBlock(b),this._buildTree(b)),this._options.noEnd||(this._newLine(),this._typeKeyword("end if"));break;case"loop":this._newLine(),j=e.value,T={for:"for",forall:"for all",while:"while"},this._typeKeyword(T[j]+" "),M=e.children[0],this._buildTree(M),this._typeKeyword(" do"),w=e.children[1],this._buildCommentsFromBlock(w),this._buildTree(w),this._options.noEnd||(this._newLine(),A=j==="while"?"end while":"end for",this._typeKeyword(A));break;case"repeat":this._newLine(),this._typeKeyword("repeat"),f=e.children[0],this._buildCommentsFromBlock(f),this._buildTree(f),this._newLine(),this._typeKeyword("until "),C=e.children[1],this._buildTree(C);break;case"match":this._newLine(),this._typeKeyword("match "),E=e.children[0],this._buildTree(E),this._typeKeyword(" do"),this._beginBlock();for(k=e.value.numCases,r=0;r<k;r++)this._newLine(),this._typeKeyword("case "),S=e.children[1+2*r],this._buildTree(S),this._typeKeyword(" of"),_=e.children[1+2*r+1],this._buildCommentsFromBlock(_),this._buildTree(_),this._options.noEnd||(this._newLine(),this._typeKeyword("end case"));F=e.value.hasOtherwise,F&&(this._newLine(),this._typeKeyword("otherwise"),y=e.children[e.children.length-1],this._buildCommentsFromBlock(y),this._buildTree(y)),this._endBlock(),this._options.noEnd||(this._newLine(),this._typeKeyword("end match"));break;case"upon":this._newLine(),this._typeKeyword("upon "),uponCond=e.children[0],this._buildTree(uponCond),u=e.children[1],this._buildCommentsFromBlock(u),this._buildTree(u),this._options.noEnd||(this._newLine(),this._typeKeyword("end upon"));break;case"command":D=e.value,p={break:"break",continue:"continue"}[D],this._newLine(),p&&this._typeKeyword(p);break;case"caption":this._newLine(),this._typeKeyword(this._options.titlePrefix+" "+s.captionCount+" "),n=e.children[0],this._buildTree(n);break;case"comment":n=e.children[0],this._html.beginSpan("ps-comment"),this._html.putText(this._options.commentDelimiter),this._buildTree(n),this._html.endSpan();break;case"statement":L=e.value,m={state:"",ensure:"Ensure: ",require:"Require: ",input:"Input: ",output:"Output: ",print:"print ",return:"return "}[L],this._newLine(),m&&this._typeKeyword(m),n=e.children[0],this._buildTree(n);break;case"open-text":P=new a(e.children,this._globalTextStyle),this._html.putHTML(P.renderToHTML(this.backend));break;case"close-text":H=this._globalTextStyle.fontSize(),I=new i(H),B=new a(e.children,I),this._html.putHTML(B.renderToHTML(this.backend));break;default:throw new ParseError("Unexpected ParseNode of type "+e.type)}},t.exports=s},{"./utils":6,katex:void 0,mathjax:void 0}],6:[function(e,t){function i(e){return typeof e=="string"||e instanceof String}function s(e){return typeof e=="object"&&e instanceof Object}function o(e){if(!s(e))return e+"";var n,t=[];for(n in e)t.push(n+": "+o(e[n]));return t.join(", ")}t.exports={isString:i,isObject:s,toString:o}},{}]},{},[1])(1)})
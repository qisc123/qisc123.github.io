+function(){"use strict";var n,t=80;function e(e){var t=e.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return{top:t.top+n,left:t.left+s}}function s(){var t=null,o=null,r=null;function f(){document.body.addEventListener("click",function(e){if(e.target.getAttribute("data-action")!=="zoom"||e.target.tagName!=="IMG")return;u(e)})}function u(s){if(s.stopPropagation(),document.body.classList.contains("zoom-overlay-open"))return;if(s.metaKey||s.ctrlKey)return d();e({forceDispose:!0}),t=n(s.target),t.zoomImage(),h()}function d(){window.open(event.target.getAttribute("data-original")||event.target.currentSrc||event.target.src,"_blank")}function e(e){if(e=e||{forceDispose:!1},!t)return;t[e.forceDispose?"dispose":"close"](),m(),t=null}function h(){window.addEventListener("scroll",i),document.addEventListener("click",s),document.addEventListener("keyup",a),document.addEventListener("touchstart",c),document.addEventListener("touchend",s)}function m(){window.removeEventListener("scroll",i),document.removeEventListener("keyup",a),document.removeEventListener("click",s),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",s)}function i(){o===null&&(o=window.pageYOffset);var n=o-window.pageYOffset;Math.abs(n)>=40&&e()}function a(t){t.keyCode==27&&e()}function s(t){t.stopPropagation(),t.preventDefault(),e()}function c(e){r=e.touches[0].pageY,e.target.addEventListener("touchmove",l)}function l(t){if(Math.abs(t.touches[0].pageY-r)<=10)return;e(),t.target.removeEventListener("touchmove",l)}return{listen:f}}n=function(){var c=null,l=null,i=null,r=null,n=null,s=null,a=null;function d(){var e=document.createElement("img");e.onload=function(){c=Number(e.height),l=Number(e.width),u()},e.src=n.currentSrc||n.src}function u(){s=document.createElement("div"),s.className="zoom-img-wrap",s.style.position="absolute",s.style.top=e(n).top+"px",s.style.left=e(n).left+"px",a=n.cloneNode(),a.style.visibility="hidden",n.style.width=n.offsetWidth+"px",n.parentNode.replaceChild(a,n),document.body.appendChild(s),s.appendChild(n),n.classList.add("zoom-img"),n.setAttribute("data-action","zoom-out"),i=document.createElement("div"),i.className="zoom-overlay",document.body.appendChild(i),h(),m()}function h(){n.offsetWidth;var e=l,s=c,o=e/n.width,i=window.innerHeight-t,a=window.innerWidth-t,d=e/s,u=a/i;e<a&&s<i?r=o:d<u?r=i/s*o:r=a/e*o}function m(){n.offsetWidth;var i=e(n),a=window.pageYOffset,c=a+window.innerHeight/2,l=window.innerWidth/2,d=i.top+n.height/2,u=i.left+n.width/2,h=Math.round(c-d),m=Math.round(l-u),t="scale("+r+")",o="translate("+m+"px, "+h+"px) translateZ(0)";n.style.webkitTransform=t,n.style.msTransform=t,n.style.transform=t,s.style.webkitTransform=o,s.style.msTransform=o,s.style.transform=o,document.body.classList.add("zoom-overlay-open")}function f(){if(document.body.classList.remove("zoom-overlay-open"),document.body.classList.add("zoom-overlay-transitioning"),n.style.webkitTransform="",n.style.msTransform="",n.style.transform="",s.style.webkitTransform="",s.style.msTransform="",s.style.transform="",!1 in document.body.style)return o();s.addEventListener("transitionend",o),s.addEventListener("webkitTransitionEnd",o)}function o(){if(n.removeEventListener("transitionend",o),n.removeEventListener("webkitTransitionEnd",o),!s||!s.parentNode)return;n.classList.remove("zoom-img"),n.style.width="",n.setAttribute("data-action","zoom"),a.parentNode.replaceChild(n,a),s.parentNode.removeChild(s),i.parentNode.removeChild(i),document.body.classList.remove("zoom-overlay-transitioning")}return function(e){return n=e,{zoomImage:d,close:f,dispose:o}}}(),s().listen()}()